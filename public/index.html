<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My Digital HQ</title>
  <link href='/style.css' rel='stylesheet'>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <div id="login-screen" class="login-screen">
    <div class="login-card">
      <h2>My Digital HQ</h2>
      <p class="login-subtitle">로그인하여 시작하세요</p>
      <form id="login-form" onsubmit="return handleLogin(event)">
        <input type="text" id="login-id" placeholder="아이디" required />
        <input type="password" id="login-pw" placeholder="비밀번호" required />
        <button type="submit" class="login-btn">로그인</button>
        <p id="login-error" class="login-error"></p>
      </form>
    </div>
  </div>

  <div class="container" id="app-container" style="display:none;">
    <aside class="sidebar">
      <div class="logo">
        <a href="#" data-section="dashboard">My Digital HQ</a>
      </div>
      <nav class="sidebar-nav">
        <ul>
          <li><a href="#" data-section="dashboard" class="active"><span>🏠</span>Dashboard</a></li>
          <li><a href="#" data-section="work"><span>💼</span>Company</a></li>
          <li><a href="#" data-section="venture"><span>💡</span>Venture</a></li>
          <li><a href="#" data-section="academy"><span>🎓</span>Academy</a></li>
          <li><a href="#" data-section="finance"><span>💹</span>Finance</a></li>
          <li><a href="#" data-section="lab"><span>🔬</span>Tech</a></li>
        </ul>
      </nav>
    </aside>

    <main class="content">
      <header class="header">
        <h1 id="main-title">Dashboard</h1>
        <div class="user-profile">
          <span id="user-role-label"></span>
          <button class="logout-btn" onclick="handleLogout()">로그아웃</button>
        </div>
      </header>

      <section id="dashboard" class="content-section active">
        <div class="widgets-grid">
          <div class="widget-card todo-widget">
            <h3>✅ Today's To-Do</h3>
            <div class="todo-form">
              <input type="date" id="todo-start-date" title="시작일자" />
              <input type="date" id="todo-end-date" title="완료일자" />
              <input type="text" id="todo-detail" placeholder="세부내용 입력" />
              <button class="todo-add-btn" onclick="addTodo()">추가</button>
            </div>
            <table class="todo-table">
              <thead>
                <tr>
                  <th>순번</th>
                  <th id="th-start-date" class="sortable-th" onclick="sortTodos('startDate')">시작일자</th>
                  <th id="th-end-date" class="sortable-th" onclick="sortTodos('endDate')">완료일자 ▼</th>
                  <th>세부내용</th>
                  <th>종료</th>
                  <th>삭제</th>
                </tr>
              </thead>
              <tbody id="todo-tbody"></tbody>
            </table>
          </div>
          <div class="widget-card">
            <div class="card-icon">⚡️</div>
            <div class="card-content">
              <h3>발전량/SMP 요약</h3>
              <p>PV: 1.2MWh / SMP: 150원</p>
            </div>
            <div class="card-footer"><span>Updated 5m ago</span></div>
          </div>
          <div class="widget-card">
            <div class="card-icon">📈</div>
            <div class="card-content">
              <h3>포트폴리오 수익률</h3>
              <p>+1.25% this week</p>
            </div>
            <div class="card-footer"><span>vs S&P500</span></div>
          </div>
          <div class="widget-card">
            <div class="card-icon">🗓️</div>
            <div class="card-content">
              <h3>UNIST 과제 D-Day</h3>
              <p>D-5 for Project Alpha</p>
            </div>
            <div class="card-footer"><span>AI Grad School</span></div>
          </div>
        </div>
      </section>

      <section id="work" class="content-section">
        <div class="widgets-grid">
            <div class="widget-card large">
                <h3>법령 정보</h3>
                <ul class="law-links-grid">
                    <li><a href="https://www.law.go.kr/%EB%B2%95%EB%A0%B9/%EC%A0%84%EA%B8%B0%EC%82%AC%EC%97%85%EB%B2%95" target="_blank">전기사업법</a></li>
                    <li><a href="https://www.law.go.kr/%EB%B2%95%EB%A0%B9/%EC%A0%84%EA%B8%B0%EC%82%AC%EC%97%85%EB%B2%95%EC%8B%9C%ED%96%89%EB%A0%B9" target="_blank">전기사업법 시행령</a></li>
                    <li><a href="https://www.law.go.kr/%EB%B2%95%EB%A0%B9/%EC%A0%84%EA%B8%B0%EC%82%AC%EC%97%85%EB%B2%95%EC%8B%9C%ED%96%89%EA%B7%9C%EC%B9%99" target="_blank">전기사업법 시행규칙</a></li>
                    <li><a href="https://www.law.go.kr/%EB%B2%95%EB%A0%B9/%EC%A0%84%EA%B8%B0%EA%B3%B5%EC%82%AC%EC%97%85%EB%B2%95" target="_blank">전기공사업법</a></li>
                    <li><a href="https://www.law.go.kr/%EB%B2%95%EB%A0%B9/%EC%A0%84%EA%B8%B0%EA%B3%B5%EC%82%AC%EC%97%85%EB%B2%95%EC%8B%9C%ED%96%89%EB%A0%B9" target="_blank">전기공사업법 시행령</a></li>
                    <li><a href="https://www.law.go.kr/%EB%B2%95%EB%A0%B9/%EC%A0%84%EA%B8%B0%EA%B3%B5%EC%82%AC%EC%97%85%EB%B2%95%EC%8B%9C%ED%96%89%EA%B7%9C%EC%B9%99" target="_blank">전기공사업법 시행규칙</a></li>
                    <li><a href="https://www.law.go.kr/%EB%B2%95%EB%A0%B9/%EC%A0%84%EA%B8%B0%EC%95%88%EC%A0%84%EA%B4%80%EB%A6%AC%EB%B2%95" target="_blank">전기안전관리법</a></li>
                    <li><a href="https://www.law.go.kr/%EB%B2%95%EB%A0%B9/%EC%A0%84%EA%B8%B0%EC%95%88%EC%A0%84%EA%B4%80%EB%A6%AC%EB%B2%95%EC%8B%9C%ED%96%89%EB%A0%B9" target="_blank">전기안전관리법 시행령</a></li>
                    <li><a href="https://www.law.go.kr/%EB%B2%95%EB%A0%B9/%EC%A0%84%EA%B8%B0%EC%95%88%EC%A0%84%EA%B4%80%EB%A6%AC%EB%B2%95%EC%8B%9C%ED%96%89%EA%B7%9C%EC%B9%99" target="_blank">전기안전관리법 시행규칙</a></li>
                    <li><a href="https://www.law.go.kr/%EB%B2%95%EB%A0%B9/%EC%8B%A0%EC%97%90%EB%84%88%EC%A7%80%EB%B0%8F%EC%9E%AC%EC%83%9D%EC%97%90%EB%84%88%EC%A7%80%EA%B0%9C%EB%B0%9C%E3%86%8D%EC%9D%B4%EC%9A%A9%E3%86%8D%EB%B3%B4%EA%B8%89%EC%B4%89%EC%A7%84%EB%B2%95" target="_blank">신재생에너지법</a></li>
                    <li><a href="https://www.law.go.kr/%EB%B2%95%EB%A0%B9/%EC%8B%A0%EC%97%90%EB%84%88%EC%A7%80%EB%B0%8F%EC%9E%AC%EC%83%9D%EC%97%90%EB%84%88%EC%A7%80%EA%B0%9C%EB%B0%9C%E3%86%8D%EC%9D%B4%EC%9A%A9%E3%86%8D%EB%B3%B4%EA%B8%89%EC%B4%89%EC%A7%84%EB%B2%95%EC%8B%9C%ED%96%89%EB%A0%B9" target="_blank">신재생에너지법 시행령</a></li>
                    <li><a href="https://www.law.go.kr/%EB%B2%95%EB%A0%B9/%EC%8B%A0%EC%97%90%EB%84%88%EC%A7%80%EB%B0%8F%EC%9E%AC%EC%83%9D%EC%97%90%EB%84%88%EC%A7%80%EA%B0%9C%EB%B0%9C%E3%86%8D%EC%9D%B4%EC%9A%A9%E3%86%8D%EB%B3%B4%EA%B8%89%EC%B4%89%EC%A7%84%EB%B2%95%EC%8B%9C%ED%96%89%EA%B7%9C%EC%B9%99" target="_blank">신재생에너지법 시행규칙</a></li>
                    <li><a href="https://www.law.go.kr/%EB%B2%95%EB%A0%B9/%EA%B5%AD%ED%86%A0%EC%9D%98%EA%B3%84%ED%9A%8D%EB%B0%8F%EC%9D%B4%EC%9A%A9%EC%97%90%EA%B4%80%ED%95%9C%EB%B2%95%EB%A5%A0" target="_blank">국토계획법</a></li>
                    <li><a href="https://www.law.go.kr/%EB%B2%95%EB%A0%B9/%EA%B5%AD%ED%86%A0%EC%9D%98%EA%B3%84%ED%9A%8D%EB%B0%8F%EC%9D%B4%EC%9A%A9%EC%97%90%EA%B4%80%ED%95%9C%EB%B2%95%EB%A5%A0%EC%8B%9C%ED%96%89%EB%A0%B9" target="_blank">국토계획법 시행령</a></li>
                    <li><a href="https://www.law.go.kr/%EB%B2%95%EB%A0%B9/%EA%B5%AD%ED%86%A0%EC%9D%98%EA%B3%84%ED%9A%8D%EB%B0%8F%EC%9D%B4%EC%9A%A9%EC%97%90%EA%B4%80%ED%95%9C%EB%B2%95%EB%A5%A0%EC%8B%9C%ED%96%89%EA%B7%9C%EC%B9%99" target="_blank">국토계획법 시행규칙</a></li>
                    <li><a href="https://law.go.kr/%eb%b2%95%eb%a0%b9/%ea%b5%ad%ea%b0%80%ea%b3%84%ec%95%bd%eb%b2%95" target="_blank">국가계약법</a></li>
                    <li><a href="https://law.go.kr/%eb%b2%95%eb%a0%b9/%ea%b5%ad%ea%b0%80%ea%b3%84%ec%95%bd%eb%b2%95%EC%8B%9C%ED%96%89%EB%A0%B9" target="_blank">국가계약법 시행령</a></li>
                    <li><a href="https://law.go.kr/%eb%b2%95%eb%a0%b9/%ea%b5%ad%ea%b0%80%ea%b3%84%ec%95%bd%eb%b2%95%EC%8B%9C%ED%96%89%EA%B7%9C%EC%B9%99" target="_blank">국가계약법 시행규칙</a></li>
                    <li><a href="https://www.law.go.kr/%EB%B2%95%EB%A0%B9/%EC%A0%84%EB%A0%A5%EA%B8%B0%EC%88%A0%EA%B4%80%EB%A6%AC%EB%B2%95" target="_blank">전력기술관리법</a></li>
                    <li><a href="https://www.law.go.kr/%EB%B2%95%EB%A0%B9/%EC%A0%84%EB%A0%A5%EA%B8%B0%EC%88%A0%EA%B4%80%EB%A6%AC%EB%B2%95%EC%8B%9C%ED%96%89%EB%A0%B9" target="_blank">전력기술관리법 시행령</a></li>
                    <li><a href="https://www.law.go.kr/%EB%B2%95%EB%A0%B9/%EC%A0%84%EB%A0%A5%EA%B8%B0%EC%88%A0%EA%B4%80%EB%A6%AC%EB%B2%95%EC%8B%9C%ED%96%89%EA%B7%9C%EC%B9%99" target="_blank">전력기술관리법 시행규칙</a></li>
                    <li><a href="https://www.law.go.kr/%EB%B2%95%EB%A0%B9/%EC%82%B0%EC%97%85%EC%95%88%EC%A0%84%EB%B3%B4%EA%B1%B4%EB%B2%95" target="_blank">산업안전보건법</a></li>
                    <li><a href="https://www.law.go.kr/%EB%B2%95%EB%A0%B9/%EC%82%B0%EC%97%85%EC%95%88%EC%A0%84%EB%B3%B4%EA%B1%B4%EB%B2%95%EC%8B%9C%ED%96%89%EB%A0%B9" target="_blank">산업안전보건법 시행령</a></li>
                    <li><a href="https://www.law.go.kr/%EB%B2%95%EB%A0%B9/%EC%82%B0%EC%97%85%EC%95%88%EC%A0%84%EB%B3%B4%EA%B1%B4%EB%B2%95%EC%8B%9C%ED%96%89%EA%B7%9C%EC%B9%99" target="_blank">산업안전보건법 시행규칙</a></li>
                    <li><a href="https://www.law.go.kr/%EB%B2%95%EB%A0%B9/%EC%A4%91%EB%8C%80%EC%9E%AC%ED%95%B4%EC%B2%98%EB%B2%8C%EB%B2%95" target="_blank">중대재해처벌법</a></li>
                    <li><a href="https://www.law.go.kr/%EB%B2%95%EB%A0%B9/%EC%A4%91%EB%8C%80%EC%9E%AC%ED%95%B4%EC%B2%98%EB%B2%8C%EB%B2%95%EC%8B%9C%ED%96%89%EB%A0%B9" target="_blank">중대재해처벌법 시행령</a></li>
                    <li><a href="" target="_blank"></a></li>
                    <li><a href="https://law.go.kr/%ed%96%89%ec%a0%95%ea%b7%9c%ec%b9%99/%ed%95%9c%ea%b5%ad%ec%a0%84%ea%b8%b0%ec%84%a4%eb%b9%84%ea%b7%9c%ec%a0%95" target="_blank">한국전기설비규정</a></li>
                    <li><a href="https://law.go.kr/%ed%96%89%ec%a0%95%ea%b7%9c%ec%b9%99/%ec%a0%84%ea%b8%b0%ec%84%a4%eb%b9%84%ea%b8%b0%ec%88%a0%ea%b8%b0%ec%a4%80" target="_blank">전기설비기술기준</a></li>
                    <li><a href="https://law.go.kr/%ED%96%89%EC%A0%95%EA%B7%9C%EC%B9%99/%EC%A0%84%EA%B8%B0%EC%84%A4%EB%B9%84%EA%B2%80%EC%82%AC%EB%B0%8F%EC%A0%90%EA%B2%80%EC%9D%98%EB%B0%A9%EB%B2%95%C2%B7%EC%A0%88%EC%B0%A8%EB%93%B1%EC%97%90%EA%B4%80%ED%95%9C%EA%B3%A0%EC%8B%9C" target="_blank">전기설비 점검기준</a></li>
                  </ul>
            </div>
            <div class="widget-card large">
                <h3>설비 현황(VFB ESS, PV) 모니터링</h3>
                <div class="chart-placeholder">Chart will go here</div>
            </div>
        </div>
      </section>
      
      <section id="venture" class="content-section">
        <div class="widgets-grid">
            <div class="widget-card large">
                <h3>아이디어 메모장</h3>
                <div class="memo-placeholder">Markdown style memo area</div>
            </div>
            <div class="widget-card large">
                <h3>진단 이미지 갤러리 그리드</h3>
                <div class="gallery-grid-placeholder">Image gallery will go here</div>
            </div>
        </div>
      </section>
      
      <section id="academy" class="content-section">
        <div class="widgets-grid">
            <div class="widget-card">
                <h3>이번 학기 커리큘럼</h3>
                <ul>
                    <li>Course A: Advanced AI</li>
                    <li>Course B: Quantum Computing</li>
                </ul>
            </div>
            <div class="widget-card">
                <h3>논문 PDF 업로드</h3>
                <div class="upload-placeholder">PDF Upload field</div>
            </div>
        </div>
      </section>

      <section id="finance" class="content-section">
        <div class="widgets-grid">
            <div class="widget-card portfolio-widget">
                <div class="portfolio-header">
                    <h3>💹 포트폴리오</h3>
                    <div class="portfolio-header-right">
                        <span id="portfolio-rate-info" class="portfolio-rate-info"></span>
                        <button class="portfolio-refresh-btn" onclick="refreshPortfolio()">🔄 시세 업데이트</button>
                    </div>
                </div>
                <div class="portfolio-form">
                    <select id="asset-type" onchange="toggleAssetFields()">
                        <option value="stock">주식</option>
                        <option value="cash">예수금</option>
                    </select>
                    <input type="text" id="portfolio-category" placeholder="구분 (예: 토스증권)" />
                    <!-- Stock fields -->
                    <select id="portfolio-market" class="stock-field">
                        <option value="US">US (미국)</option>
                        <option value="KR">KR (한국)</option>
                    </select>
                    <input type="text" id="portfolio-ticker" class="stock-field" placeholder="티커 (예: AAPL, 005930)" />
                    <input type="text" id="portfolio-name" class="stock-field" placeholder="종목명 (미입력 시 자동)" />
                    <input type="number" id="portfolio-buy-price" class="stock-field" placeholder="매수가 (원)" />
                    <input type="number" id="portfolio-quantity" class="stock-field" placeholder="수량" step="0.01" />
                    <!-- Cash fields -->
                    <select id="cash-currency" class="cash-field" style="display:none;">
                        <option value="KRW">KRW (원)</option>
                        <option value="USD">USD (달러)</option>
                    </select>
                    <input type="number" id="cash-amount" class="cash-field" style="display:none;" placeholder="금액" step="0.01" />
                    <button class="todo-add-btn" onclick="addAsset()">추가</button>
                </div>
                <div class="portfolio-table-wrap">
                    <table class="portfolio-table">
                        <thead>
                            <tr>
                                <th>순번</th>
                                <th class="sortable-th" onclick="sortPortfolio('category')">구분 ▲</th>
                                <th class="sortable-th" onclick="sortPortfolio('market')">시장</th>
                                <th class="sortable-th" onclick="sortPortfolio('ticker')">Ticker</th>
                                <th class="sortable-th" onclick="sortPortfolio('name')">종목명</th>
                                <th class="sortable-th" onclick="sortPortfolio('currentPrice')">현재가</th>
                                <th>환율(₩/$)</th>
                                <th class="sortable-th" onclick="sortPortfolio('buyPrice')">매수가(₩)</th>
                                <th class="sortable-th" onclick="sortPortfolio('quantity')">수량</th>
                                <th class="sortable-th" onclick="sortPortfolio('evalValue')">평가금(₩)</th>
                                <th class="sortable-th" onclick="sortPortfolio('profit')">수익금(₩)</th>
                                <th class="sortable-th" onclick="sortPortfolio('profitRate')">수익률</th>
                                <th>수정</th>
                                <th>삭제</th>
                            </tr>
                        </thead>
                        <tbody id="portfolio-tbody"></tbody>
                        <tfoot id="portfolio-tfoot"></tfoot>
                    </table>
                </div>
            </div>
            <div class="widget-card">
                <h3>자산 배분</h3>
                <div class="chart-placeholder">Chart.js Pie Chart</div>
            </div>
        </div>
      </section>

      <section id="lab" class="content-section">
        <div class="widgets-grid">
            <div class="widget-card">
                <h3>라즈베리파이 시스템 상태</h3>
                <div class="gauge-placeholder">CPU/RAM Gauge Bar</div>
            </div>
        </div>
      </section>

    </main>
  </div>

  <!-- Firebase SDK (CDN) -->
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>

  <script defer type="text/javascript" src="/script.js"></script>
</body>
</html>